<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Publicações - DISET</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Estilos para o agrupamento */
    .publications-group {
      margin-bottom: 2rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      overflow: hidden;
      background-color: #fff;
    }

    .group-header {
      background-color: #002d62;
      color: white;
      padding: 1rem;
      font-size: 1.5em;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .group-header:hover {
        background-color: #004085;
    }

    .group-list {
      list-style-type: none;
      padding: 0;
      margin: 0;
      display: none; /* Inicia escondido */
    }

    .group-list li {
      padding: 1rem;
      border-bottom: 1px solid #eee;
    }

    .group-list li:last-child {
      border-bottom: none;
    }

    .group-list a {
      color: #007bff;
      text-decoration: none;
      font-weight: 500;
    }
    
    .group-list a:hover {
      text-decoration: underline;
    }
    
    .group-toggle-icon {
      font-size: 1.5em;
      transition: transform 0.3s ease;
    }

    .publications-group.open .group-list {
      display: block;
    }

    .publications-group.open .group-toggle-icon {
      transform: rotate(90deg);
    }
    
    .card {
        padding: 2rem;
    }

    /* Estilos para o menu de filtros */
    .filter-section {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: 2rem;
    }

    .filter-fields {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
        flex-wrap: wrap;
        justify-content: center;
    }

    .filter-fields label, .filter-fields select {
        font-size: 1.1em;
    }

    .filter-fields select {
        padding: 8px;
        border-radius: 5px;
        border: 1px solid #ccc;
    }

    .filter-fields button {
        padding: 10px 20px;
        background-color: #002d62;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    .filter-fields button:hover {
        background-color: #004085;
    }

    .filter-menu {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 20px;
      padding: 15px;
      background-color: #f0f2f5;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .filter-menu button {
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 5px;
      padding: 10px 15px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
    }
    
    .filter-menu button:hover {
      background-color: #e9ecef;
    }
    
    .filter-menu button.active {
      background-color: #002d62;
      color: white;
      border-color: #002d62;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo gdf.png" alt="Logo GDF">
    <h1>Publicações e Legislação</h1>
  </header>
  <main class="main-content">
    <div class="card">
      <!-- Menu de filtros -->
      <div class="filter-section">
        <div class="filter-fields">
            <label for="tipo-documento">Filtrar por tipo de documento:</label>
            <select id="tipo-documento">
                <option value="todos">Todos</option>
                <option value="portarias">Portarias</option>
                <option value="leis">Leis</option>
                <option value="resolucoes">Resoluções</option>
                <option value="outros">Outros Documentos</option>
            </select>
            <label for="assunto">Filtrar por assunto:</label>
            <select id="assunto">
                <option value="todos">Todos</option>
                <option value="remanejamento">Remanejamento</option>
                <option value="modulacao">Modulação</option>
                <option value="provimento">Provimento</option>
                <option value="outros">Outros</option>
            </select>
            <button onclick="applyFilters()">Aplicar Filtros</button>
        </div>
      </div>
      
      <div id="publications-container">
        <!-- Publicações serão carregadas aqui -->
      </div>
    </div>
  </main>
  <footer>
    <div class="back-button-container">
      <a href="index.html" class="back-button">Voltar para a página inicial</a>
      <a href="gestao.html" class="back-button">Gerenciar Publicações</a>
    </div>
    <p>© 2025 - Secretaria de Estado de Educação do Distrito Federal (SEEDF) – DISET/SUGEP</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Preenche o localStorage com dados de exemplo se ele estiver vazio
      if (!localStorage.getItem('publicacoes')) {
        const examplePublications = [
          { name: 'Portaria 123', type: 'portarias', subject: 'remanejamento', fileName: 'portaria_123.pdf' },
          { name: 'Portaria 456', type: 'portarias', subject: 'modulacao', fileName: 'portaria_456.pdf' },
          { name: 'Lei 789', type: 'leis', subject: 'provimento', fileName: 'lei_789.pdf' },
          { name: 'Resolução XYZ', type: 'resolucoes', subject: 'outros', fileName: 'resolucao_xyz.pdf' },
          { name: 'Outro documento', type: 'outros', subject: 'outros', fileName: 'doc_outro.pdf' }
        ];
        localStorage.setItem('publicacoes', JSON.stringify(examplePublications));
      }
      
      loadAndRenderPublications();
    });

    function applyFilters() {
        const tipoDocumento = document.getElementById('tipo-documento').value;
        const assunto = document.getElementById('assunto').value;
        loadAndRenderPublications(tipoDocumento, assunto);
    }

    function loadAndRenderPublications(filterType = 'todos', filterSubject = 'todos') {
      const container = document.getElementById('publications-container');
      container.innerHTML = '';
      const publications = JSON.parse(localStorage.getItem('publicacoes')) || [];
      
      let filteredPublications = publications;
      if (filterType !== 'todos') {
        filteredPublications = filteredPublications.filter(pub => pub.type === filterType);
      }
      if (filterSubject !== 'todos') {
        filteredPublications = filteredPublications.filter(pub => pub.subject === filterSubject);
      }

      const groupedPublications = filteredPublications.reduce((acc, pub) => {
        if (!acc[pub.type]) {
          acc[pub.type] = [];
        }
        acc[pub.type].push(pub);
        return acc;
      }, {});

      if (filteredPublications.length === 0) {
        container.innerHTML = '<p>Nenhuma publicação encontrada para os filtros selecionados.</p>';
        return;
      }
      
      const typeNames = {
          'portarias': 'Portarias',
          'leis': 'Leis',
          'resolucoes': 'Resoluções',
          'outros': 'Outros Documentos'
      };

      for (const type in groupedPublications) {
        const group = document.createElement('div');
        group.className = 'publications-group';
        
        const header = document.createElement('div');
        header.className = 'group-header';
        header.innerHTML = `
          <span>${typeNames[type]}</span>
          <span class="group-toggle-icon">></span>
        `;
        
        const list = document.createElement('ul');
        list.className = 'group-list';
        
        groupedPublications[type].forEach(pub => {
          const listItem = document.createElement('li');
          const link = document.createElement('a');
          link.href = '#'; // Link temporário
          link.textContent = `${pub.name} (${pub.subject}) - Arquivo: ${pub.fileName || 'Nenhum'}`;
          listItem.appendChild(link);
          list.appendChild(listItem);
        });
        
        group.appendChild(header);
        group.appendChild(list);
        container.appendChild(group);

        // Adiciona funcionalidade para expandir/colapsar
        header.addEventListener('click', () => {
          group.classList.toggle('open');
        });
      }
    }
  </script>
</body>
</html>
