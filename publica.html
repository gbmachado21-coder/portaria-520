<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Publicações - DISET</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Estilos para o agrupamento */
    .publications-group {
      margin-bottom: 2rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      overflow: hidden;
      background-color: #fff;
    }

    .group-header {
      background-color: #002d62;
      color: white;
      padding: 1rem;
      font-size: 1.5em;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .group-header:hover {
        background-color: #004085;
    }

    .group-list {
      list-style-type: none;
      padding: 0;
      margin: 0;
      display: none; /* Inicia escondido */
    }

    .group-list li {
      padding: 1rem;
      border-bottom: 1px solid #eee;
    }

    .group-list li:last-child {
      border-bottom: none;
    }

    .group-list a {
      color: #007bff;
      text-decoration: none;
      font-weight: 500;
    }
    
    .group-list a:hover {
      text-decoration: underline;
    }
    
    .group-toggle-icon {
      font-size: 1.5em;
      transition: transform 0.3s ease;
    }

    .publications-group.open .group-list {
      display: block;
    }

    .publications-group.open .group-toggle-icon {
      transform: rotate(90deg);
    }
    
    .card {
        padding: 2rem;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo gdf.png" alt="Logo GDF">
    <h1>Publicações e Legislação</h1>
  </header>
  <main class="main-content">
    <div class="card">
      <div id="publications-container">
        <!-- Publicações serão carregadas aqui -->
      </div>
    </div>
  </main>
  <footer>
    <div class="back-button-container">
      <a href="index.html" class="back-button">Voltar para a página inicial</a>
      <a href="gestao.html" class="back-button">Gerenciar Publicações</a>
    </div>
    <p>© 2025 - Secretaria de Estado de Educação do Distrito Federal (SEEDF) – DISET/SUGEP</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Preenche o localStorage com dados de exemplo se ele estiver vazio
      if (!localStorage.getItem('publicacoes')) {
        const examplePublications = [
          { name: 'Portaria 123', type: 'portarias', subject: 'remanejamento', fileName: 'portaria_123.pdf' },
          { name: 'Portaria 456', type: 'portarias', subject: 'modulacao', fileName: 'portaria_456.pdf' },
          { name: 'Lei 789', type: 'leis', subject: 'provimento', fileName: 'lei_789.pdf' },
          { name: 'Resolução XYZ', type: 'resolucoes', subject: 'outros', fileName: 'resolucao_xyz.pdf' },
          { name: 'Outro documento', type: 'outros', subject: 'outros', fileName: 'doc_outro.pdf' }
        ];
        localStorage.setItem('publicacoes', JSON.stringify(examplePublications));
      }
      
      loadAndRenderPublications();
    });

    function loadAndRenderPublications() {
      const container = document.getElementById('publications-container');
      container.innerHTML = '';
      const publications = JSON.parse(localStorage.getItem('publicacoes')) || [];
      
      const groupedPublications = publications.reduce((acc, pub) => {
        if (!acc[pub.type]) {
          acc[pub.type] = [];
        }
        acc[pub.type].push(pub);
        return acc;
      }, {});

      if (publications.length === 0) {
        container.innerHTML = '<p>Nenhuma publicação encontrada.</p>';
        return;
      }
      
      const typeNames = {
          'portarias': 'Portarias',
          'leis': 'Leis',
          'resolucoes': 'Resoluções',
          'outros': 'Outros Documentos'
      };

      for (const type in groupedPublications) {
        const group = document.createElement('div');
        group.className = 'publications-group';
        
        const header = document.createElement('div');
        header.className = 'group-header';
        header.innerHTML = `
          <span>${typeNames[type]}</span>
          <span class="group-toggle-icon">></span>
        `;
        
        const list = document.createElement('ul');
        list.className = 'group-list';
        
        groupedPublications[type].forEach(pub => {
          const listItem = document.createElement('li');
          const link = document.createElement('a');
          link.href = '#'; // Link temporário
          link.textContent = `${pub.name} (${pub.subject}) - Arquivo: ${pub.fileName || 'Nenhum'}`;
          listItem.appendChild(link);
          list.appendChild(listItem);
        });
        
        group.appendChild(header);
        group.appendChild(list);
        container.appendChild(group);

        // Adiciona funcionalidade para expandir/colapsar
        header.addEventListener('click', () => {
          group.classList.toggle('open');
        });
      }
    }
  </script>
</body>
</html>
